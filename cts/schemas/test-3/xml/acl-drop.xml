<cib crm_feature_set="3.19.7" validate-with="pacemaker-3.10" epoch="8" num_updates="0" admin_epoch="0">
  <configuration>
    <!-- The essential elements of this test are:
         * There is a remove-after-stop property that will be dropped.
         * There is a location constraint that will be replaced by two new
           location constraints, such that the original constraint ID no longer
           exists.
         * There is a nagios resource that will be dropped, and it contains a
           meta_attributes block.
         * There is an OCF resource that will be kept.
         * There are ACL permissions that refer directly to the
           remove-after-stop element and original location constraint mentioned
           listed above.
         * There is an ACL permissions that refers directly to the
           meta_attributes block nested within the nagios resource.
         * There is an ACL permission that refers directly to the OCF resource.
         * There is an ACL permission that refers directly to the ACL permission
           for the remove-after-stop property.

         In this situation, the ACL permissions that refer to the dropped
         remove-after-stop element, the dropped location constraint, and the
         meta_attributes block within the nagios resource should have their
         reference attributes replaced with "xpath='/*[false()]'", which doesn't
         match anything. The other ACL permissions should remain unchanged.
      -->
    <crm_config>
      <cluster_property_set id="cib-bootstrap-options">
        <nvpair id="cib-bootstrap-options-remove-after-stop" name="remove-after-stop" value="false"/>
      </cluster_property_set>
    </crm_config>
    <nodes/>
    <resources>
      <primitive id="rsc1" class="ocf" provider="pacemaker" type="Dummy"/>
      <primitive id="rsc2" class="nagios" type="fake">
        <meta_attributes id="rsc2-meta_attributes"/>
      </primitive>
    </resources>
    <constraints>
      <rsc_location id="rsc1-loc" rsc="rsc1">
        <rule id="rsc1-loc-rule-1" score="INFINITY">
          <date_expression id="rsc1-loc-rule-1-expr" operation="gt" start="2021-01-01"/>
        </rule>
        <rule id="rsc1-loc-rule-2" score="INFINITY">
          <date_expression id="rsc1-loc-rule-2-expr" operation="gt" start="2022-01-01"/>
        </rule>
      </rsc_location>
    </constraints>
    <acls>
      <acl_role id="role1">
        <acl_permission id="role1-deny-property-drop" kind="deny" reference="cib-bootstrap-options-remove-after-stop"/>
        <acl_permission id="role1-deny-rsc1-loc-drop" kind="deny" reference="rsc1-loc"/>
        <acl_permission id="role1-deny-rsc2-meta_attributes-drop" kind="deny" reference="rsc2-meta_attributes"/>
        <acl_permission id="role1-deny-rsc1-keep" kind="deny" reference="rsc1"/>
        <acl_permission id="role1-deny-role1-deny-property-drop-keep" kind="deny" reference="role1-deny-property-drop"/>
      </acl_role>
    </acls>
  </configuration>
  <status/>
</cib>
