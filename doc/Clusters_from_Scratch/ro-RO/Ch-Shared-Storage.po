msgid ""
msgstr ""
"Project-Id-Version: Clusters from Scratch 1.1\n"
"POT-Creation-Date: 2011-11-18 07:10+0200\n"
"PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n"
"Last-Translator: Dan Frîncu <df.cluster@gmail.com>\n"
"Language-Team: ROMANIAN <RO@li.org>\n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"
"X-Poedit-Language: Romanian\n"
"X-Poedit-Country: ROMANIA\n"

#: Ch-Shared-Storage.xml:7(title)
msgid "Replicated Storage with DRBD"
msgstr ""

#: Ch-Shared-Storage.xml:8(para)
msgid "Even if you’re serving up static websites, having to manually synchronize the contents of that website to all the machines in the cluster is not ideal. For dynamic websites, such as a wiki, its not even an option. Not everyone care afford network-attached storage but somehow the data needs to be kept in sync. Enter DRBD which can be thought of as network based RAID-1. See <ulink url=\"http://www.drbd.org/\">http://www.drbd.org</ulink>/ for more details."
msgstr ""

#: Ch-Shared-Storage.xml:18(title)
msgid "Install the DRBD Packages"
msgstr ""

#: Ch-Shared-Storage.xml:19(para)
msgid "Since its inclusion in the upstream 2.6.33 kernel, everything needed to use DRBD ships with Fedora 13. All you need to do is install it:"
msgstr ""

#: Ch-Shared-Storage.xml:24(userinput)
#, no-wrap
msgid "yum install -y drbd-pacemaker drbd-udev"
msgstr ""

#: Ch-Shared-Storage.xml:23(screen)
#, no-wrap
msgid "\n[root@pcmk-1 ~]# <placeholder-1/>\nLoaded plugins: presto, refresh-packagekit\nSetting up Install Process\nResolving Dependencies\n--&gt; Running transaction check\n---&gt; Package drbd-pacemaker.x86_64 0:8.3.7-2.fc13 set to be updated\n--&gt; Processing Dependency: drbd-utils = 8.3.7-2.fc13 for package: drbd-pacemaker-8.3.7-2.fc13.x86_64\n--&gt; Running transaction check\n---&gt; Package drbd-utils.x86_64 0:8.3.7-2.fc13 set to be updated\n--&gt; Finished Dependency Resolution\n\nDependencies Resolved\n\n=================================================================================\n Package                Arch           Version              Repository      Size\n=================================================================================\nInstalling:\n drbd-pacemaker         x86_64         8.3.7-2.fc13         fedora          19 k\nInstalling for dependencies:\n drbd-utils             x86_64         8.3.7-2.fc13         fedora         165 k\n\nTransaction Summary\n=================================================================================\nInstall       2 Package(s)\nUpgrade       0 Package(s)\n\nTotal download size: 184 k\nInstalled size: 427 k\nDownloading Packages:\nSetting up and reading Presto delta metadata\nfedora/prestodelta                                        | 1.7 kB     00:00     \nProcessing delta metadata\nPackage(s) data still to download: 184 k\n(1/2): drbd-pacemaker-8.3.7-2.fc13.x86_64.rpm             |  19 kB     00:01     \n(2/2): drbd-utils-8.3.7-2.fc13.x86_64.rpm                 | 165 kB     00:02     \n---------------------------------------------------------------------------------\nTotal                                             45 kB/s | 184 kB     00:04     \nRunning rpm_check_debug\nRunning Transaction Test\nTransaction Test Succeeded\nRunning Transaction\n  Installing     : drbd-utils-8.3.7-2.fc13.x86_64                            1/2 \n  Installing     : drbd-pacemaker-8.3.7-2.fc13.x86_64                        2/2 \n\nInstalled:\n  drbd-pacemaker.x86_64 0:8.3.7-2.fc13                                           \n\nDependency Installed:\n  drbd-utils.x86_64 0:8.3.7-2.fc13                                               \n\nComplete!\n[root@pcmk-1 ~]#\n    "
msgstr ""

#: Ch-Shared-Storage.xml:79(title)
msgid "Configure DRBD"
msgstr ""

#: Ch-Shared-Storage.xml:80(para)
msgid "Before we configure DRBD, we need to set aside some disk for it to use."
msgstr ""

#: Ch-Shared-Storage.xml:84(title)
msgid "Create A Partition for DRBD"
msgstr ""

#: Ch-Shared-Storage.xml:85(para)
msgid "If you have more than 1Gb free, feel free to use it. For this guide however, 1Gb is plenty of space for a single html file and sufficient for later holding the GFS2 metadata."
msgstr ""

#: Ch-Shared-Storage.xml:90(userinput) Ch-Shared-Storage.xml:107(userinput)
#, no-wrap
msgid "lvcreate -n drbd-demo -L 1G VolGroup"
msgstr ""

#: Ch-Shared-Storage.xml:92(userinput) Ch-Shared-Storage.xml:103(userinput) Ch-Shared-Storage.xml:109(userinput)
#, no-wrap
msgid "lvs"
msgstr ""

#: Ch-Shared-Storage.xml:94(emphasis) Ch-Shared-Storage.xml:111(emphasis)
msgid "drbd-demo VolGroup -wi-a- 1.00G"
msgstr ""

#: Ch-Shared-Storage.xml:89(screen)
#, no-wrap
msgid "\n[root@pcmk-1 ~]# <placeholder-1/>\n  Logical volume \"drbd-demo\" created\n[root@pcmk-1 ~]# <placeholder-2/>\n  LV        VG       Attr   LSize   Origin Snap%  Move Log Copy%  Convert\n  <placeholder-3/>                                      \n  lv_root   VolGroup -wi-ao   7.30G                                      \n  lv_swap   VolGroup -wi-ao 500.00M\n      "
msgstr ""

#: Ch-Shared-Storage.xml:98(para)
msgid "Repeat this on the second node, be sure to use the same size partition."
msgstr ""

#: Ch-Shared-Storage.xml:106(emphasis) Ch-Shared-Storage.xml:147(emphasis) Ch-Shared-Storage.xml:152(emphasis)
msgid "VolGroup"
msgstr ""

#: Ch-Shared-Storage.xml:108(emphasis)
msgid "Logical volume \"drbd-demo\" created"
msgstr ""

#: Ch-Shared-Storage.xml:102(screen)
#, no-wrap
msgid "\n[root@pcmk-2 ~]# <placeholder-1/>\n  LV      VG       Attr   LSize   Origin Snap%  Move Log Copy%  Convert\n  lv_root VolGroup -wi-ao   7.30G                                      \n  lv_swap <placeholder-2/> -wi-ao 500.00M                                      \n[root@pcmk-2 ~]# <placeholder-3/>\n <placeholder-4/>\n[root@pcmk-2 ~]# <placeholder-5/>\n  LV        VG       Attr   LSize   Origin Snap%  Move Log Copy%  Convert\n  <placeholder-6/>                                     \n  lv_root   VolGroup -wi-ao   7.30G                                      \n  lv_swap   VolGroup -wi-ao 500.00M\n      "
msgstr ""

#: Ch-Shared-Storage.xml:118(title)
msgid "Write the DRBD Config"
msgstr ""

#: Ch-Shared-Storage.xml:119(para)
msgid "There is no series of commands for build a DRBD configuration, so simply copy the configuration below to /etc/drbd.conf"
msgstr ""

#: Ch-Shared-Storage.xml:122(para)
msgid "Detailed information on the directives used in this configuration (and other alternatives) is available from <ulink url=\"http://www.drbd.org/users-guide/ch-configure.html\">http://www.drbd.org/users-guide/ch-configure.html</ulink>"
msgstr ""

#: Ch-Shared-Storage.xml:126(para)
msgid "Be sure to use the names and addresses of <emphasis>your</emphasis> nodes if they differ from the ones used in this guide."
msgstr ""

#: Ch-Shared-Storage.xml:146(emphasis)
msgid "on pcmk-1"
msgstr ""

#: Ch-Shared-Storage.xml:148(emphasis) Ch-Shared-Storage.xml:153(emphasis)
msgid ":7789;"
msgstr ""

#: Ch-Shared-Storage.xml:150(emphasis)
msgid "on"
msgstr ""

#: Ch-Shared-Storage.xml:151(emphasis)
msgid "pcmk-2"
msgstr ""

#: Ch-Shared-Storage.xml:130(screen)
#, no-wrap
msgid "\nglobal { \n  usage-count yes; \n}\ncommon {\n  protocol C;\n}\nresource wwwdata {\n  meta-disk internal;\n  device    /dev/drbd1;\n  syncer {\n    verify-alg sha1;\n  }\n  net { \n    allow-two-primaries; \n  }\n <placeholder-1/> {\n    disk      /dev/mapper/<placeholder-2/>-drbd--demo;\n    address   192.168.122.101<placeholder-3/> \n  }\n  <placeholder-4/> \n<placeholder-5/> {\n    disk      /dev/mapper/<placeholder-6/>-drbd--demo;\n    address   192.168.122.102<placeholder-7/>      \n  }\n}\n      "
msgstr ""

#: Ch-Shared-Storage.xml:158(para)
msgid "TODO: Explain the reason for the allow-two-primaries option"
msgstr ""

#: Ch-Shared-Storage.xml:165(title)
msgid "Initialize and Load DRBD"
msgstr ""

#: Ch-Shared-Storage.xml:166(para)
msgid "With the configuration in place, we can now perform the DRBD initialization"
msgstr ""

#: Ch-Shared-Storage.xml:170(userinput)
#, no-wrap
msgid "drbdadm create-md wwwdata"
msgstr ""

#: Ch-Shared-Storage.xml:179(userinput)
#, no-wrap
msgid "yes"
msgstr ""

#: Ch-Shared-Storage.xml:169(screen)
#, no-wrap
msgid "\n[root@pcmk-1 ~]# <placeholder-1/>\nmd_offset 12578816\nal_offset 12546048\nbm_offset 12541952\n\nFound some data \n ==&gt; This might destroy existing data! &lt;==\n\nDo you want to proceed?\n[need to type 'yes' to confirm] <placeholder-2/>\n\nWriting meta data...\ninitializing activity log\nNOT initialized bitmap\nNew drbd meta data block successfully created.\nsuccess\n      "
msgstr ""

#: Ch-Shared-Storage.xml:187(para)
msgid "Now load the DRBD kernel module and confirm that everything is sane"
msgstr ""

#: Ch-Shared-Storage.xml:191(userinput) Ch-Shared-Storage.xml:212(userinput)
#, no-wrap
msgid "modprobe drbd"
msgstr ""

#: Ch-Shared-Storage.xml:192(userinput) Ch-Shared-Storage.xml:214(userinput)
#, no-wrap
msgid "drbdadm up wwwdata"
msgstr ""

#: Ch-Shared-Storage.xml:193(userinput) Ch-Shared-Storage.xml:215(userinput) Ch-Shared-Storage.xml:228(userinput) Ch-Shared-Storage.xml:235(userinput)
#, no-wrap
msgid "cat /proc/drbd"
msgstr ""

#: Ch-Shared-Storage.xml:197(emphasis)
msgid "1: cs:WFConnection ro:Secondary/Unknown ds:Inconsistent/DUnknown C r--"
msgstr ""

#: Ch-Shared-Storage.xml:206(userinput)
#, no-wrap
msgid "drbdadm --force create-md wwwdata"
msgstr ""

#: Ch-Shared-Storage.xml:219(emphasis)
msgid "1: cs:Connected ro:Secondary/Secondary ds:Inconsistent/Inconsistent C r----"
msgstr ""

#: Ch-Shared-Storage.xml:190(screen)
#, no-wrap
msgid "\n[root@pcmk-1 ~]# <placeholder-1/>\n[root@pcmk-1 ~]# <placeholder-2/>\n[root@pcmk-1 ~]# <placeholder-3/>\nversion: 8.3.6 (api:88/proto:86-90)\nGIT-hash: f3606c47cc6fcf6b3f086e425cb34af8b7a81bbf build by root@pcmk-1, 2009-12-08 11:22:57\n\n<placeholder-4/>--\n    ns:0 nr:0 dw:0 dr:0 al:0 bm:0 lo:0 pe:0 ua:0 ap:0 ep:1 wo:b oos:12248\n[root@pcmk-1 ~]# \n\nRepeat on the second node\ndrbdadm --force create-md wwwdata \nmodprobe drbd\ndrbdadm up wwwdata\ncat /proc/drbd\n[root@pcmk-2 ~]# <placeholder-5/>\nWriting meta data...\ninitializing activity log\nNOT initialized bitmap\nNew drbd meta data block successfully created.\nsuccess\n[root@pcmk-2 ~]# <placeholder-6/>\nWARNING: Deprecated config file /etc/modprobe.conf, all config files belong into /etc/modprobe.d/.\n[root@pcmk-2 ~]# <placeholder-7/>\n[root@pcmk-2 ~]# <placeholder-8/>\nversion: 8.3.6 (api:88/proto:86-90)\nGIT-hash: f3606c47cc6fcf6b3f086e425cb34af8b7a81bbf build by root@pcmk-1, 2009-12-08 11:22:57\n\n<placeholder-9/>\n    ns:0 nr:0 dw:0 dr:0 al:0 bm:0 lo:0 pe:0 ua:0 ap:0 ep:1 wo:b oos:12248\n      "
msgstr ""

#: Ch-Shared-Storage.xml:222(para)
msgid "Now we need to tell DRBD which set of data to use. Since both sides contain garbage, we can run the following on pcmk-1:"
msgstr ""

#: Ch-Shared-Storage.xml:227(userinput)
#, no-wrap
msgid "drbdadm -- --overwrite-data-of-peer primary wwwdata"
msgstr ""

#: Ch-Shared-Storage.xml:231(emphasis)
msgid "Inconsistent"
msgstr ""

#: Ch-Shared-Storage.xml:238(emphasis)
msgid "cs:Connected ro:Primary/Secondary ds:UpToDate/UpToDate"
msgstr ""

#: Ch-Shared-Storage.xml:226(screen)
#, no-wrap
msgid "\n[root@pcmk-1 ~]# <placeholder-1/>\n[root@pcmk-1 ~]# <placeholder-2/>\nversion: 8.3.6 (api:88/proto:86-90)\nGIT-hash: f3606c47cc6fcf6b3f086e425cb34af8b7a81bbf build by root@pcmk-1, 2009-12-08 11:22:57\n 1: cs:SyncSource ro:Primary/Secondary ds:UpToDate/<placeholder-3/> C r----\n    ns:2184 nr:0 dw:0 dr:2472 al:0 bm:0 lo:0 pe:0 ua:0 ap:0 ep:1 wo:b oos:10064\n        [=====&gt;..............] sync'ed: 33.4% (10064/12248)K\n        finish: 0:00:37 speed: 240 (240) K/sec\n[root@pcmk-1 ~]# <placeholder-4/>\nversion: 8.3.6 (api:88/proto:86-90)\nGIT-hash: f3606c47cc6fcf6b3f086e425cb34af8b7a81bbf build by root@pcmk-1, 2009-12-08 11:22:57\n 1: <placeholder-5/> C r----\n    ns:12248 nr:0 dw:0 dr:12536 al:0 bm:1 lo:0 pe:0 ua:0 ap:0 ep:1 wo:b oos:0\n      "
msgstr ""

#: Ch-Shared-Storage.xml:241(para)
msgid "pcmk-1 is now in the Primary state which allows it to be written to. Which means its a good point at which to create a filesystem and populate it with some data to serve up via our WebSite resource."
msgstr ""

#: Ch-Shared-Storage.xml:247(title)
msgid "Populate DRBD with Data"
msgstr ""

#: Ch-Shared-Storage.xml:249(userinput)
#, no-wrap
msgid "mkfs.ext4 /dev/drbd1"
msgstr ""

#: Ch-Shared-Storage.xml:280(userinput)
#, no-wrap
msgid "mount /dev/drbd1 /mnt/"
msgstr ""

#: Ch-Shared-Storage.xml:281(userinput)
#, no-wrap
msgid "cat &lt;&lt;-END &gt;/mnt/index.html"
msgstr ""

#: Ch-Shared-Storage.xml:286(userinput)
#, no-wrap
msgid "umount /dev/drbd1"
msgstr ""

#: Ch-Shared-Storage.xml:248(screen)
#, no-wrap
msgid "\n[root@pcmk-1 ~]# <placeholder-1/>\nmke2fs 1.41.4 (27-Jan-2009)\nFilesystem label=\nOS type: Linux\nBlock size=1024 (log=0)\nFragment size=1024 (log=0)\n3072 inodes, 12248 blocks\n612 blocks (5.00%) reserved for the super user\nFirst data block=1\nMaximum filesystem blocks=12582912\n2 block groups\n8192 blocks per group, 8192 fragments per group\n1536 inodes per group\nSuperblock backups stored on blocks: \n        8193\n\nWriting inode tables: done                            \nCreating journal (1024 blocks): done\nWriting superblocks and filesystem accounting information: done\n\nThis filesystem will be automatically checked every 26 mounts or\n180 days, whichever comes first.  Use tune2fs -c or -i to override.\n\nNow mount the newly created filesystem so we can create our index file\nmount /dev/drbd1 /mnt/\ncat &lt;&lt;-END &gt;/mnt/index.html\n&lt;html&gt;\n&lt;body&gt;My Test Site - drbd&lt;/body&gt;\n&lt;/html&gt;\nEND\numount /dev/drbd1\n[root@pcmk-1 ~]# <placeholder-2/>\n[root@pcmk-1 ~]# <placeholder-3/>\n&gt; &lt;html&gt;\n&gt; &lt;body&gt;My Test Site - drbd&lt;/body&gt;\n&gt; &lt;/html&gt;\n&gt; END\n[root@pcmk-1 ~]# <placeholder-4/>\n      "
msgstr ""

#: Ch-Shared-Storage.xml:291(title)
msgid "Configure the Cluster for DRBD"
msgstr ""

#: Ch-Shared-Storage.xml:292(para)
msgid "One handy feature of the crm shell is that you can use it in interactive mode to make several changes atomically."
msgstr ""

#: Ch-Shared-Storage.xml:295(para)
msgid "First we launch the shell. The prompt will change to indicate you’re in interactive mode."
msgstr ""

#: Ch-Shared-Storage.xml:299(userinput) Ch-Shared-Storage.xml:386(userinput)
#, no-wrap
msgid "crm"
msgstr ""

#: Ch-Shared-Storage.xml:298(screen)
#, no-wrap
msgid "\n[root@pcmk-1 ~]# <placeholder-1/>\ncib crm(live)#\n    "
msgstr ""

#: Ch-Shared-Storage.xml:302(para)
msgid "Next we must create a working copy or the current configuration. This is where all our changes will go. The cluster will not see any of them until we say its ok. Notice again how the prompt changes, this time to indicate that we’re no longer looking at the live cluster."
msgstr ""

#: Ch-Shared-Storage.xml:309(userinput)
#, no-wrap
msgid "cib new drbd"
msgstr ""

#: Ch-Shared-Storage.xml:308(screen)
#, no-wrap
msgid "\ncib crm(live)# <placeholder-1/>\nINFO: drbd shadow CIB created\ncrm(drbd)#\n    "
msgstr ""

#: Ch-Shared-Storage.xml:313(para)
msgid "Now we can create our DRBD clone and display the revised configuration."
msgstr ""

#: Ch-Shared-Storage.xml:317(userinput)
#, no-wrap
msgid "configure primitive WebData ocf:linbit:drbd params drbd_resource=wwwdata \\"
msgstr ""

#: Ch-Shared-Storage.xml:318(userinput)
#, no-wrap
msgid "        op monitor interval=60s"
msgstr ""

#: Ch-Shared-Storage.xml:319(userinput)
#, no-wrap
msgid "configure ms WebDataClone WebData meta master-max=1 master-node-max=1 \\"
msgstr ""

#: Ch-Shared-Storage.xml:320(userinput)
#, no-wrap
msgid "        clone-max=2 clone-node-max=1 notify=true"
msgstr ""

#: Ch-Shared-Storage.xml:321(userinput)
#, no-wrap
msgid "configure show"
msgstr ""

#: Ch-Shared-Storage.xml:324(emphasis)
msgid "primitive WebData ocf:linbit:drbd \\"
msgstr ""

#: Ch-Shared-Storage.xml:325(emphasis)
msgid "params drbd_resource=\"wwwdata\" \\"
msgstr ""

#: Ch-Shared-Storage.xml:326(emphasis)
msgid "op monitor interval=\"60s\""
msgstr ""

#: Ch-Shared-Storage.xml:333(emphasis)
msgid "ms WebDataClone WebData \\"
msgstr ""

#: Ch-Shared-Storage.xml:334(emphasis)
msgid "meta master-max=\"1\" master-node-max=\"1\" clone-max=\"2\" clone-node-max=\"1\" notify=\"true\""
msgstr ""

#: Ch-Shared-Storage.xml:316(screen)
#, no-wrap
msgid "\ncrm(drbd)# <placeholder-1/>\n<placeholder-2/>\ncrm(drbd)# <placeholder-3/>\n<placeholder-4/>\ncrm(drbd)# <placeholder-5/>\nnode pcmk-1\nnode pcmk-2\n<placeholder-6/>\n<placeholder-7/>\n<placeholder-8/>\nprimitive WebSite ocf:heartbeat:apache \\\n        params configfile=\"/etc/httpd/conf/httpd.conf\" \\\n        op monitor interval=\"1min\"\nprimitive ClusterIP ocf:heartbeat:IPaddr2 \\\n        params ip=\"192.168.122.101\" cidr_netmask=\"32\" \\\n        op monitor interval=\"30s\"\n<placeholder-9/>\n<placeholder-10/>\nlocation prefer-pcmk-1 WebSite 50: pcmk-1\ncolocation website-with-ip inf: WebSite ClusterIP\norder apache-after-ip inf: ClusterIP WebSite\nproperty $id=\"cib-bootstrap-options\" \\\n        dc-version=\"1.1.5-bdd89e69ba545404d02445be1f3d72e6a203ba2f\" \\\n        cluster-infrastructure=\"openais\" \\\n        expected-quorum-votes=\"2\" \\\n        stonith-enabled=\"false\" \\\n        no-quorum-policy=\"ignore\"\nrsc_defaults $id=\"rsc-options\" \\\n        resource-stickiness=\"100\"\n    "
msgstr ""

#: Ch-Shared-Storage.xml:347(para)
msgid "Once we’re happy with the changes, we can tell the cluster to start using them and use crm_mon to check everything is functioning."
msgstr ""

#: Ch-Shared-Storage.xml:351(userinput)
#, no-wrap
msgid "cib commit drbd"
msgstr ""

#: Ch-Shared-Storage.xml:353(userinput) Ch-Shared-Storage.xml:443(userinput)
#, no-wrap
msgid "quit"
msgstr ""

#: Ch-Shared-Storage.xml:355(userinput) Ch-Shared-Storage.xml:445(userinput) Ch-Shared-Storage.xml:478(userinput) Ch-Shared-Storage.xml:503(userinput)
#, no-wrap
msgid "crm_mon"
msgstr ""

#: Ch-Shared-Storage.xml:369(emphasis)
msgid "Master/Slave Set: WebDataClone"
msgstr ""

#: Ch-Shared-Storage.xml:370(emphasis) Ch-Shared-Storage.xml:494(emphasis)
msgid "Masters: [ pcmk-2 ]"
msgstr ""

#: Ch-Shared-Storage.xml:371(emphasis)
msgid "Slaves: [ pcmk-1 ]"
msgstr ""

#: Ch-Shared-Storage.xml:350(screen)
#, no-wrap
msgid "\ncrm(drbd)# <placeholder-1/>\nINFO: commited 'drbd' shadow CIB to the cluster\ncrm(drbd)# <placeholder-2/>\nbye\n[root@pcmk-1 ~]# <placeholder-3/>\n============\nLast updated: Tue Sep  1 09:37:13 2009\nStack: openais\nCurrent DC: pcmk-1 - partition with quorum\nVersion: 1.1.5-bdd89e69ba545404d02445be1f3d72e6a203ba2f\n2 Nodes configured, 2 expected votes\n3 Resources configured.\n============\n\nOnline: [ pcmk-1 pcmk-2 ]\n\nClusterIP        (ocf::heartbeat:IPaddr):        Started pcmk-1\nWebSite (ocf::heartbeat:apache):        Started pcmk-1\n<placeholder-4/>\n<placeholder-5/>\n<placeholder-6/>\n    "
msgstr ""

#: Ch-Shared-Storage.xml:374(para)
msgid "Include details on adding a second DRBD resource"
msgstr ""

#: Ch-Shared-Storage.xml:378(para)
msgid "Now that DRBD is functioning we can configure a Filesystem resource to use it. In addition to the filesystem’s definition, we also need to tell the cluster where it can be located (only on the DRBD Primary) and when it is allowed to start (after the Primary was promoted)."
msgstr ""

#: Ch-Shared-Storage.xml:382(para)
msgid "Once again we’ll use the shell’s interactive mode"
msgstr ""

#: Ch-Shared-Storage.xml:387(userinput)
#, no-wrap
msgid "cib new fs"
msgstr ""

#: Ch-Shared-Storage.xml:389(userinput)
#, no-wrap
msgid "configure primitive WebFS ocf:heartbeat:Filesystem \\"
msgstr ""

#: Ch-Shared-Storage.xml:390(userinput)
#, no-wrap
msgid "        params device=\"/dev/drbd/by-res/wwwdata\" directory=\"/var/www/html\" fstype=\"ext4\""
msgstr ""

#: Ch-Shared-Storage.xml:391(userinput)
#, no-wrap
msgid "configure colocation fs_on_drbd inf: WebFS WebDataClone:Master"
msgstr ""

#: Ch-Shared-Storage.xml:392(userinput)
#, no-wrap
msgid "configure order WebFS-after-WebData inf: WebDataClone:promote WebFS:start"
msgstr ""

#: Ch-Shared-Storage.xml:385(screen)
#, no-wrap
msgid "\n[root@pcmk-1 ~]# <placeholder-1/>\ncrm(live)# <placeholder-2/>\nINFO: fs shadow CIB created\ncrm(fs)# <placeholder-3/>\n<placeholder-4/>\ncrm(fs)# <placeholder-5/>\ncrm(fs)# <placeholder-6/>\n    "
msgstr ""

#: Ch-Shared-Storage.xml:394(para)
msgid "We also need to tell the cluster that Apache needs to run on the same machine as the filesystem and that it must be active before Apache can start."
msgstr ""

#: Ch-Shared-Storage.xml:398(userinput)
#, no-wrap
msgid "configure colocation WebSite-with-WebFS inf: WebSite WebFS"
msgstr ""

#: Ch-Shared-Storage.xml:399(userinput)
#, no-wrap
msgid "configure order WebSite-after-WebFS inf: WebFS WebSite"
msgstr ""

#: Ch-Shared-Storage.xml:397(screen)
#, no-wrap
msgid "\ncrm(fs)# <placeholder-1/>\ncrm(fs)# <placeholder-2/>\n    "
msgstr ""

#: Ch-Shared-Storage.xml:401(para)
msgid "Time to review the updated configuration:"
msgstr ""

#: Ch-Shared-Storage.xml:405(userinput)
#, no-wrap
msgid "crm configure show"
msgstr ""

#: Ch-Shared-Storage.xml:404(screen)
#, no-wrap
msgid "\n[root@pcmk-1 ~]# <placeholder-1/>\nnode pcmk-1\nnode pcmk-2\nprimitive WebData ocf:linbit:drbd \\\n        params drbd_resource=\"wwwdata\" \\\n        op monitor interval=\"60s\"\nprimitive WebFS ocf:heartbeat:Filesystem \\\n        params device=\"/dev/drbd/by-res/wwwdata\" directory=\"/var/www/html\" fstype=\"ext4\"\nprimitive WebSite ocf:heartbeat:apache \\\n        params configfile=\"/etc/httpd/conf/httpd.conf\" \\\n        op monitor interval=\"1min\"\nprimitive ClusterIP ocf:heartbeat:IPaddr2 \\\n        params ip=\"192.168.122.101\" cidr_netmask=\"32\" \\\n        op monitor interval=\"30s\"\nms WebDataClone WebData \\\n        meta master-max=\"1\" master-node-max=\"1\" clone-max=\"2\" clone-node-max=\"1\" notify=\"true\"\nlocation prefer-pcmk-1 WebSite 50: pcmk-1\ncolocation WebSite-with-WebFS inf: WebSite WebFS\ncolocation fs_on_drbd inf: WebFS WebDataClone:Master\ncolocation website-with-ip inf: WebSite ClusterIP\norder WebFS-after-WebData inf: WebDataClone:promote WebFS:start\norder WebSite-after-WebFS inf: WebFS WebSite\norder apache-after-ip inf: ClusterIP WebSite\nproperty $id=\"cib-bootstrap-options\" \\\n        dc-version=\"1.1.5-bdd89e69ba545404d02445be1f3d72e6a203ba2f\" \\\n        cluster-infrastructure=\"openais\" \\\n        expected-quorum-votes=\"2\" \\\n        stonith-enabled=\"false\" \\\n        no-quorum-policy=\"ignore\"\nrsc_defaults $id=\"rsc-options\" \\\n        resource-stickiness=\"100\"\n    "
msgstr ""

#: Ch-Shared-Storage.xml:437(para)
msgid "After reviewing the new configuration, we again upload it and watch the cluster put it into effect."
msgstr ""

#: Ch-Shared-Storage.xml:441(userinput)
#, no-wrap
msgid "cib commit fs"
msgstr ""

#: Ch-Shared-Storage.xml:458(emphasis)
msgid "WebSite (ocf::heartbeat:apache): Started pcmk-1"
msgstr ""

#: Ch-Shared-Storage.xml:462(emphasis)
msgid "WebFS (ocf::heartbeat:Filesystem): Started pcmk-1"
msgstr ""

#: Ch-Shared-Storage.xml:440(screen)
#, no-wrap
msgid "\ncrm(fs)# <placeholder-1/>\nINFO: commited 'fs' shadow CIB to the cluster\ncrm(fs)# <placeholder-2/>\nbye\n[root@pcmk-1 ~]# <placeholder-3/>\n============\nLast updated: Tue Sep  1 10:08:44 2009\nStack: openais\nCurrent DC: pcmk-1 - partition with quorum\nVersion: 1.1.5-bdd89e69ba545404d02445be1f3d72e6a203ba2f\n2 Nodes configured, 2 expected votes\n4 Resources configured.\n============\n\nOnline: [ pcmk-1 pcmk-2 ]\n\nClusterIP        (ocf::heartbeat:IPaddr):        Started pcmk-1\n<placeholder-4/>\nMaster/Slave Set: WebDataClone\n        Masters: [ pcmk-1 ]\n        Slaves: [ pcmk-2 ]\n<placeholder-5/>\n    "
msgstr ""

#: Ch-Shared-Storage.xml:465(title)
msgid "Testing Migration"
msgstr ""

#: Ch-Shared-Storage.xml:466(para)
msgid "We could shut down the active node again, but another way to safely simulate recovery is to put the node into what is called \"standby mode\". Nodes in this state tell the cluster that they are not allowed to run resources. Any resources found active there will be moved elsewhere. This feature can be particularly useful when updating the resources’ packages."
msgstr ""

#: Ch-Shared-Storage.xml:472(para)
msgid "Put the local node into standby mode and observe the cluster move all the resources to the other node. Note also that the node’s status will change to indicate that it can no longer host resources."
msgstr ""

#: Ch-Shared-Storage.xml:477(userinput)
#, no-wrap
msgid "crm node standby"
msgstr ""

#: Ch-Shared-Storage.xml:488(emphasis)
msgid "Node pcmk-1: standby"
msgstr ""

#: Ch-Shared-Storage.xml:491(emphasis) Ch-Shared-Storage.xml:492(emphasis) Ch-Shared-Storage.xml:496(emphasis)
msgid "Started pcmk-2"
msgstr ""

#: Ch-Shared-Storage.xml:476(screen)
#, no-wrap
msgid "\n[root@pcmk-1 ~]# <placeholder-1/>\n[root@pcmk-1 ~]# <placeholder-2/>\n============\nLast updated: Tue Sep  1 10:09:57 2009\nStack: openais\nCurrent DC: pcmk-1 - partition with quorum\nVersion: 1.1.5-bdd89e69ba545404d02445be1f3d72e6a203ba2f\n2 Nodes configured, 2 expected votes\n4 Resources configured.\n============\n\n<placeholder-3/>\nOnline: [ pcmk-2 ]\n\nClusterIP        (ocf::heartbeat:IPaddr):        <placeholder-4/>\nWebSite (ocf::heartbeat:apache):        <placeholder-5/>\nMaster/Slave Set: WebDataClone\n        <placeholder-6/>\n        Stopped: [ WebData:1 ]\nWebFS   (ocf::heartbeat:Filesystem):    <placeholder-7/>\n      "
msgstr ""

#: Ch-Shared-Storage.xml:498(para)
msgid "Once we’ve done everything we needed to on pcmk-1 (in this case nothing, we just wanted to see the resources move), we can allow the node to be a full cluster member again."
msgstr ""

#: Ch-Shared-Storage.xml:502(userinput)
#, no-wrap
msgid "crm node online"
msgstr ""

#: Ch-Shared-Storage.xml:513(emphasis)
msgid "Online: [ pcmk-1 pcmk-2 ]"
msgstr ""

#: Ch-Shared-Storage.xml:501(screen)
#, no-wrap
msgid "\n[root@pcmk-1 ~]# <placeholder-1/>\n[root@pcmk-1 ~]# <placeholder-2/>\n============\nLast updated: Tue Sep  1 10:13:25 2009\nStack: openais\nCurrent DC: pcmk-1 - partition with quorum\nVersion: 1.1.5-bdd89e69ba545404d02445be1f3d72e6a203ba2f\n2 Nodes configured, 2 expected votes\n4 Resources configured.\n============\n\n<placeholder-3/>\n\nClusterIP        (ocf::heartbeat:IPaddr):        Started pcmk-2\nWebSite (ocf::heartbeat:apache):        Started pcmk-2\nMaster/Slave Set: WebDataClone\n        Masters: [ pcmk-2 ]\n        Slaves: [ pcmk-1 ]\nWebFS   (ocf::heartbeat:Filesystem):    Started pcmk-2\n      "
msgstr ""

#: Ch-Shared-Storage.xml:522(para)
msgid "Notice that our resource stickiness settings prevent the services from migrating back to pcmk-1."
msgstr ""

#. Put one translator per line, in the form of NAME <EMAIL>, YEAR1, YEAR2
#: Ch-Shared-Storage.xml:0(None)
msgid "translator-credits"
msgstr ""

